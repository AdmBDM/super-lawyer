# –†–µ–≥–ª–∞–º–µ–Ω—Ç —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ super-lawyer

---

## 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –û–∫—Ä—É–∂–µ–Ω–∏–µ        | –ü—É—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ                           | –í–µ—Ç–∫–∞ GitHub       | –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è            |
|------------------|---------------------------------------------------|--------------------|--------------------------|
| –õ–æ–∫–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ | `R:\www\jurist\dev`                               | develop (–ª–æ–∫–∞–ª—å–Ω–æ) | ‚Äî                        |
| –¢–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä  | `/var/www/www-root/data/www/test.super-lawyer.ru` | develop            | `scripts/deploy_test.sh` |
| –ë–æ–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä    | `/var/www/www-root/data/www/super-lawyer.ru`      | main               | `scripts/deploy_prod.sh` |

---

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

- –ù–∞ GitHub —Å–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `super-lawyer`.
- –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫–∏ `main` (prod) –∏ `develop` (dev).
- –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ª–æ–∫–∞–ª—å–Ω–æ.
- –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –≤–µ—Ç–∫–µ `develop`, –ø—É—à–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç—É–¥–∞.
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ.
- –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–ª–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ç–∫—É `main` –∏ –¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ –ø—Ä–æ–¥.

---

## 3. –†–∞–±–æ—Ç–∞ —Å SSH

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª—é—á —Å –∏–º–µ–Ω–µ–º `id_ed25519_vhs`.
- –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–µ–∑ –ø–∞—Ä–æ–ª—è (–¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è).
- –ù–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –≤ `~/.ssh/authorized_keys`.
- –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ ‚Äî –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SSH –¥–ª—è GitHub.

---

## 4. –°–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è

### 4.1 –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ –ø—Ä–∞–≤–∞

- –°–∫—Ä–∏–ø—Ç—ã –ª–µ–∂–∞—Ç –≤ –ø–∞–ø–∫–µ `scripts/` –Ω–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–µ—Ä–µ.
- –§–∞–π–ª—ã `deploy_test.sh` –∏ `deploy_prod.sh` –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ (`chmod +x`).
- –í `.gitignore` –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ `/scripts/deploy_*.sh` –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ —Ä–µ–ø–æ.

### 4.2 –¢–µ—Å—Ç–æ–≤—ã–π –¥–µ–ø–ª–æ–π (`deploy_test.sh`)

```bash
#!/bin/bash

echo "üîÑ Resetting to origin/develop..."
git fetch origin
git reset --hard origin/develop || exit 1

echo "üì¶ Installing composer dependencies..."
composer install --no-interaction --prefer-dist || exit 1

echo "üîÉ Running migrations..."
php yii migrate --interactive=0 || exit 1

echo "‚úÖ Deploy complete."
```

### 4.3 –ü—Ä–æ–¥–∞–∫—à–Ω –¥–µ–ø–ª–æ–π (deploy_prod.sh)

```bash
#!/bin/bash
echo "üîÑ Resetting to origin/main..."
git fetch origin
git reset --hard origin/main || exit 1

echo "üì¶ Installing composer dependencies..."
export COMPOSER_ALLOW_SUPERUSER=1
composer install --no-dev --no-interaction --prefer-dist || exit 1

echo "üîÉ Running migrations..."
php yii migrate --interactive=0 || exit 1

echo "üîê Fixing permissions..."
chown -R www-data:www-data backend/runtime backend/web/assets \
                   console/runtime \
                   frontend/runtime frontend/web/assets
chmod -R 775 backend/runtime backend/web/assets \
              console/runtime \
              frontend/runtime frontend/web/assets

echo "‚úÖ Deploy complete."
```

---

### 5. –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º

- –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –†–∞–±–æ—Ç–∞ –≤ –≤–µ—Ç–∫–µ develop.
- –ö–æ–º–º–∏—Ç –∏ –ø—É—à –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –≤–µ—Ç–∫—É develop.
- –î–µ–ø–ª–æ–π –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Ç–µ—Å—Ç–æ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É.
- –ó–∞–ø—É—Å—Ç–∏—Ç—å ./scripts/deploy_test.sh.
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–∞–π—Ç–∞ –Ω–∞ test.super-lawyer.ru.
- –ü–µ—Ä–µ–Ω–æ—Å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω
- –°–ª–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ develop –≤ main –Ω–∞ GitHub.
  - git checkout main
  - git merge develop
  - git push origin main 
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä—É.
- –ó–∞–ø—É—Å—Ç–∏—Ç—å ./scripts/deploy_prod.sh.
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–∞–π—Ç–∞ –Ω–∞ super-lawyer.ru.

---

### 6. –í–∞–∂–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –º–µ–Ω—è—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è –≤—Ä—É—á–Ω—É—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö –±–µ–∑ —Ñ–∏–∫—Å–∞—Ü–∏–∏ –≤ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–µ.
- –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–Ω–æ—Å–æ–º –Ω–∞ –ø—Ä–æ–¥.
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–∞–º runtime –∏ web/assets —Å–æ–≥–ª–∞—Å–Ω–æ —Å–∫—Ä–∏–ø—Ç–∞–º.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å git config --global --add safe.directory <–ø—É—Ç—å> –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –æ—à–∏–±–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Git.
- –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ SSH-–∫–ª—é—á–∏ –±–µ–∑ –ø–∞—Ä–æ–ª—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –¥–µ–ø–ª–æ—è.

---

### 7. –ò–∫–æ–Ω–∫–∏ –¥–ª—è —É—Å–ª—É–≥
üìö –ì–¥–µ –≤–∑—è—Ç—å —ç—Ç–∏ –∏–∫–æ–Ω–∫–∏?
–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç: https://icons.getbootstrap.com

–¢–∞–º –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Å–∏–º–≤–æ–ª, –∫–ª–∏–∫–Ω—É—Ç—å, –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–º—è –∫–ª–∞—Å—Å–∞.

